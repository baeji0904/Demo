<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ìŠ¤ë„ì¿ </title>
<style>
  :root{
    --bg:#070a16; --panel:#11152b; --ink:#e9edff; --muted:#9aa3c7; --accent:#7aa2ff;
    --panel2:#0b0f1e;
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto;
  }
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
  h1{font-size:22px;margin:0}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

  .btn{
    padding:7px 11px;
    border:1px solid #2a315e;
    border-radius:12px;
    background:#1b2145;
    color:var(--ink);
    cursor:pointer;
    font-size:14px;
  }
  .btn-primary{
    background:linear-gradient(180deg,#2e4cff,#2337a7);
    border-color:#3a50ff;
  }
  .btn:disabled{opacity:.45;cursor:not-allowed}

  .tag{
    display:inline-flex;gap:8px;align-items:center;
    padding:6px 10px;border:1px solid #2b325c;
    border-radius:999px;background:#121632;color:var(--muted);
  }

  .panel{
    background:var(--panel2);
    border:1px solid #222747;
    border-radius:16px;
    padding:12px;
  }

  #board-wrap{
    max-width:520px;
    margin:0 auto;
  }

  table#grid{
    border-collapse:separate;
    border-spacing:2px;
    margin:4px auto 10px;
    background:radial-gradient(900px 450px at 50% -200px,#111827 10%,#020617 60%,#000000 100%);
    padding:8px;
    border-radius:18px;
    box-shadow:0 18px 40px rgba(15,23,42,0.85);
  }

  #grid td{
    position:relative;
    width:48px;
    height:48px;
    padding:0;
    background:
      radial-gradient(circle at 18% 15%, rgba(248,250,252,0.12) 0, transparent 45%),
      radial-gradient(circle at 80% 85%, rgba(15,23,42,0.9) 0, rgba(15,23,42,0.2) 55%),
      linear-gradient(145deg,#020617,#030712 40%,#020617 100%);
    border:1px solid #4b5563;
    border-radius:10px;
    box-shadow:
      inset 0 0 0 1px rgba(15,23,42,0.8),
      0 2px 4px rgba(15,23,42,0.75);
    cursor:pointer;
    overflow:hidden;
  }

  .cell-inner{
    position:relative;
    width:100%;
    height:100%;
  }

  .cell-value{
    position:absolute;
    left:50%;
    top:52%;
    transform:translate(-50%,-50%);
    font-size:20px;
    font-weight:600;
    color:#e5e7eb;
    text-shadow:0 1px 2px rgba(15,23,42,0.9);
    font-variant-numeric:tabular-nums;
  }

  #grid td.fixed .cell-value{
    color:#93c5fd;
  }

  /* ì„ íƒëœ ì¹¸ */
  #grid td.selected{
    box-shadow:
      0 0 0 2px rgba(59,130,246,0.95) inset,
      0 0 14px rgba(59,130,246,0.7);
    background:
      radial-gradient(circle at 18% 15%, rgba(219,234,254,0.75) 0, transparent 45%),
      linear-gradient(145deg,#1f2937,#020617 50%,#020617 100%);
  }

  /* ì„ íƒ ì¹¸ê³¼ ê°™ì€ í–‰/ì—´ */
  #grid td.line-highlight{
    background:
      linear-gradient(0deg, rgba(191,219,254,0.85) 0, rgba(191,219,254,0.18) 100%),
      linear-gradient(145deg,#020617,#020617 40%,#020617 100%);
  }

  /* ê°™ì€ ìˆ«ì */
  #grid td.same-num{
    background:
      radial-gradient(circle at 18% 15%, rgba(191,219,254,0.9) 0, transparent 45%),
      linear-gradient(145deg,#1d283a,#020617 40%,#020617 100%);
  }

  #grid td.error{
    background:
      radial-gradient(circle at 18% 15%, rgba(254,242,242,0.24) 0, transparent 45%),
      linear-gradient(145deg,#7f1d1d,#450a0a 60%,#111827 100%);
    box-shadow:
      inset 0 0 0 2px rgba(248,113,113,0.9),
      0 0 14px rgba(248,113,113,0.4);
  }
  #grid td.error .cell-value{
    color:#fecaca;
  }

  /* 3x3 ë°•ìŠ¤ êµ¬ë¶„ì„  */
  #grid td.box-right{border-right:3px solid #e5e7eb}
  #grid td.box-bottom{border-bottom:3px solid #e5e7eb}

  label{font-size:14px;color:var(--muted)}
  select{
    padding:5px 8px;
    border-radius:10px;
    border:1px solid #2b325c;
    background:#10142c;
    color:var(--ink);
    font-size:14px;
  }

  .info{font-size:14px;color:#9aa3c7;margin-top:6px}
  .status-good{color:#22c55e}
  .status-bad{color:#f97373}

  /* ìˆ«ì íŒ¨ë“œ */
  #num-pad{
    margin-top:8px;
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    justify-content:center;
  }
  .pad-btn{
    min-width:42px;
    height:40px;
    padding:0 10px;
    border-radius:12px;
    border:1px solid rgba(148,163,184,0.6);
    background:
      radial-gradient(circle at 20% 0%, rgba(248,250,252,0.25) 0, transparent 40%),
      linear-gradient(180deg,#111827,#020617);
    color:#e5e7eb;
    font-size:15px;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(15,23,42,0.9);
    display:flex;
    align-items:center;
    justify-content:center;
    touch-action:manipulation;
  }
  .pad-btn:active{
    transform:translateY(1px) scale(0.98);
    box-shadow:0 2px 6px rgba(15,23,42,0.9);
    background:
      radial-gradient(circle at 20% 0%, rgba(248,250,252,0.18) 0, transparent 40%),
      linear-gradient(180deg,#020617,#020617);
  }
  .pad-btn-clear{
    min-width:70px;
    font-size:14px;
    border-color:rgba(248,113,113,0.7);
    color:#fecaca;
  }

  @media (max-width:520px){
    #grid td{
      width:40px;
      height:40px;
    }
    .cell-value{font-size:18px}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>ìŠ¤ë„ì¿ </h1>
    <div class="row">
      <button id="btn-new" class="btn btn-primary">ìƒˆ í¼ì¦</button>
      <button id="btn-hint" class="btn">íŒíŠ¸</button>
      <button id="btn-check" class="btn">ì •ë‹µ í™•ì¸</button>
      <button id="btn-clear" class="btn">ëª¨ë‘ ì§€ìš°ê¸°</button>
    </div>
  </header>

  <div class="row" style="margin-top:10px;margin-bottom:8px">
    <span class="tag">
      ë‚œì´ë„&nbsp;
      <select id="sel-diff">
        <option value="fast">Fast (ë§¤ìš° ì‰¬ì›€)</option>
        <option value="easy" selected>Easy (ì‰¬ì›€)</option>
        <option value="medium">Medium (ë³´í†µ)</option>
        <option value="hard">Hard (ì–´ë ¤ì›€)</option>
        <option value="expert">Expert (ê³ ê¸‰)</option>
        <option value="master">Master (ìµœê³  ë‚œë„)</option>
      </select>
    </span>
    <span class="tag">íŒíŠ¸ <b id="hint-label">3 / 3</b></span>
    <span class="tag">ì‹¤ìˆ˜ <b id="mistake-label">0 / 3</b></span>
    <span class="tag">ìƒíƒœ <b id="status-label">ë‚œì´ë„ë¥¼ ê³ ë¥´ê³  ìƒˆ í¼ì¦ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</b></span>
  </div>

  <div id="board-wrap" class="panel">
    <table id="grid" aria-label="ìŠ¤ë„ì¿  ë³´ë“œ"></table>

    <!-- ëª¨ë°”ì¼/PC ê³µí†µ ìˆ«ì íŒ¨ë“œ -->
    <div id="num-pad"></div>

    <div class="info">
      ê°€ë¡œÂ·ì„¸ë¡œÂ·3Ã—3 ë¸”ë¡ë§ˆë‹¤ <b>1~9</b>ê°€ í•œ ë²ˆì”©ë§Œ ë“¤ì–´ê°€ê²Œ ìˆ«ìë¥¼ ì±„ìš°ì„¸ìš”.<br>
      ì¹¸ì„ í´ë¦­í•œ ë’¤ <b>í‚¤ë³´ë“œ ìˆ«ì</b> ë˜ëŠ” ì•„ë˜ <b>ìˆ«ì íŒ¨ë“œ</b>ë¡œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
      íŒíŠ¸ëŠ” <b>3ë²ˆ</b>, ì‹¤ìˆ˜ëŠ” <b>3ë²ˆ</b>ê¹Œì§€ í—ˆìš©ë©ë‹ˆë‹¤.
    </div>
  </div>
</div>

<script>
(function(){
  'use strict';

  const gridEl   = document.getElementById('grid');
  const padEl    = document.getElementById('num-pad');
  const selDiff  = document.getElementById('sel-diff');
  const btnNew   = document.getElementById('btn-new');
  const btnCheck = document.getElementById('btn-check');
  const btnClear = document.getElementById('btn-clear');
  const btnHint  = document.getElementById('btn-hint');
  const statusEl = document.getElementById('status-label');
  const hintLabel= document.getElementById('hint-label');
  const mistakeLabel = document.getElementById('mistake-label');

  const DIFFS = {
    fast:   {name:'Fast',   minClues:45},
    easy:   {name:'Easy',   minClues:38},
    medium: {name:'Medium', minClues:32},
    hard:   {name:'Hard',   minClues:28},
    expert: {name:'Expert', minClues:24},
    master: {name:'Master', minClues:17}
  };

  const S = {
    diff:'easy',
    solution:[],
    puzzle:[],
    fixed:[],
    values:[],
    selected:null,
    hintsLeft:3,
    maxHints:3,
    mistakes:0,
    maxMistakes:3,
    gameOver:false
  };

  function setStatus(text, goodBad){
    statusEl.classList.remove('status-good','status-bad');
    if(goodBad === 'good') statusEl.classList.add('status-good');
    if(goodBad === 'bad')  statusEl.classList.add('status-bad');
    statusEl.textContent = text;
  }

  function updateHud(){
    hintLabel.textContent = `${S.hintsLeft} / ${S.maxHints}`;
    mistakeLabel.textContent = `${S.mistakes} / ${S.maxMistakes}`;
  }

  function randInt(max){ return Math.floor(Math.random()*max); }
  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
  }
  function cloneGrid(g){ return g.map(row=>row.slice()); }

  // ---- ì†”ë£¨ì…˜ ìƒì„± ----
  function isSafe(grid,r,c,val){
    for(let i=0;i<9;i++){
      if(grid[r][i]===val) return false;
      if(grid[i][c]===val) return false;
    }
    const br=Math.floor(r/3)*3;
    const bc=Math.floor(c/3)*3;
    for(let rr=br;rr<br+3;rr++){
      for(let cc=bc;cc<bc+3;cc++){
        if(grid[rr][cc]===val) return false;
      }
    }
    return true;
  }

  function fillGrid(grid){
    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        if(grid[r][c]===0){
          const nums = shuffle([1,2,3,4,5,6,7,8,9]);
          for(const v of nums){
            if(isSafe(grid,r,c,v)){
              grid[r][c]=v;
              if(fillGrid(grid)) return true;
              grid[r][c]=0;
            }
          }
          return false;
        }
      }
    }
    return true;
  }

  function generateSolution(){
    const grid=Array.from({length:9},()=>Array(9).fill(0));
    fillGrid(grid);
    return grid;
  }

  // ---- ì†”ë£¨ì…˜ ê°œìˆ˜ ----
  function countSolutions(grid, limit=2){
    let count=0;
    function backtrack(){
      let r=-1,c=-1;
      outer:
      for(let i=0;i<9;i++){
        for(let j=0;j<9;j++){
          if(grid[i][j]===0){
            r=i;c=j;
            break outer;
          }
        }
      }
      if(r===-1){
        count++;
        return;
      }
      for(let v=1;v<=9;v++){
        if(isSafe(grid,r,c,v)){
          grid[r][c]=v;
          backtrack();
          grid[r][c]=0;
          if(count>=limit) return;
        }
      }
    }
    backtrack();
    return count;
  }

  // ---- í¼ì¦ ìƒì„± ----
  function generatePuzzle(diffKey){
    const diff=DIFFS[diffKey];
    const solution=generateSolution();
    let puzzle=cloneGrid(solution);

    let positions=[];
    for(let i=0;i<81;i++) positions.push(i);
    shuffle(positions);

    let clues=81;
    for(const pos of positions){
      if(clues <= diff.minClues) break;
      const r=Math.floor(pos/9);
      const c=pos%9;
      if(puzzle[r][c]===0) continue;
      const backup=puzzle[r][c];
      puzzle[r][c]=0;
      const copy=cloneGrid(puzzle);
      const solCount=countSolutions(copy,2);
      if(solCount!==1){
        puzzle[r][c]=backup;
      }else{
        clues--;
      }
    }
    return {solution,puzzle};
  }

  // ---- ë³´ë“œ/íŒ¨ë“œ ----
  function buildPad(){
    padEl.innerHTML='';
    for(let v=1;v<=9;v++){
      const btn=document.createElement('button');
      btn.type='button';
      btn.className='pad-btn';
      btn.dataset.val=String(v);
      btn.textContent=v;
      padEl.appendChild(btn);
    }
    const clearBtn=document.createElement('button');
    clearBtn.type='button';
    clearBtn.className='pad-btn pad-btn-clear';
    clearBtn.dataset.val='clear';
    clearBtn.textContent='ì§€ìš°ê¸°';
    padEl.appendChild(clearBtn);
  }

  function buildGrid(){
    gridEl.innerHTML='';
    for(let r=0;r<9;r++){
      const tr=document.createElement('tr');
      for(let c=0;c<9;c++){
        const td=document.createElement('td');
        td.dataset.r=r;
        td.dataset.c=c;
        if((c+1)%3===0 && c!==8) td.classList.add('box-right');
        if((r+1)%3===0 && r!==8) td.classList.add('box-bottom');

        const inner=document.createElement('div');
        inner.className='cell-inner';

        const valDiv=document.createElement('div');
        valDiv.className='cell-value';
        valDiv.textContent='';

        inner.appendChild(valDiv);
        td.appendChild(inner);
        tr.appendChild(td);
      }
      gridEl.appendChild(tr);
    }
  }

  function getCell(r,c){
    return gridEl.querySelector(`td[data-r="${r}"][data-c="${c}"]`);
  }

  function updateCellDisplay(r,c){
    const td=getCell(r,c);
    if(!td) return;
    td.classList.toggle('fixed', !!S.fixed[r][c]);
    td.classList.remove('error');
    const v=S.values[r][c];
    const valDiv=td.querySelector('.cell-value');
    valDiv.textContent = v ? v : '';
  }

  function clearHighlights(){
    const tds=gridEl.querySelectorAll('td');
    tds.forEach(td=>{
      td.classList.remove('line-highlight','same-num');
    });
  }

  function updateHighlights(){
    clearHighlights();
    if(!S.selected) return;
    const sr=S.selected.r;
    const sc=S.selected.c;
    const val=S.values[sr][sc];

    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        const td=getCell(r,c);
        if(!td) continue;
        // ê°™ì€ í–‰/ì—´
        if(r===sr || c===sc){
          td.classList.add('line-highlight');
        }
        // ê°™ì€ ìˆ«ì
        if(val && S.values[r][c]===val){
          td.classList.add('same-num');
        }
      }
    }
    // ì„ íƒëœ ì¹¸ì€ selectedë§Œ ë³´ì´ë„ë¡
    const selTd=getCell(sr,sc);
    if(selTd) selTd.classList.remove('line-highlight','same-num');
  }

  function selectCell(r,c){
    if(S.gameOver) return;
    const prev=S.selected;
    if(prev){
      const tdPrev=getCell(prev.r,prev.c);
      if(tdPrev) tdPrev.classList.remove('selected');
    }
    S.selected={r,c};
    const td=getCell(r,c);
    if(td) td.classList.add('selected');
    updateHighlights();
  }

  // ---- ê°’ ì…ë ¥ ----
  function placeValue(r,c,num){
    if(S.gameOver) return;
    if(S.fixed[r][c]) return;

    const td=getCell(r,c);
    if(!td) return;

    if(num===0){
      S.values[r][c]=0;
      td.classList.remove('error');
      updateCellDisplay(r,c);
      updateHighlights();
      return;
    }

    const correct = (num === S.solution[r][c]);
    S.values[r][c]=num;
    updateCellDisplay(r,c);

    if(correct){
      td.classList.remove('error');
    }else{
      td.classList.add('error');
      S.mistakes++;
      updateHud();
      setStatus(`í‹€ë ¸ìŠµë‹ˆë‹¤. (ì‹¤ìˆ˜ ${S.mistakes}/${S.maxMistakes})`, 'bad');
      if(S.mistakes>=S.maxMistakes){
        S.gameOver=true;
        setStatus('ì‹¤ìˆ˜ 3ë²ˆ! ê²Œì„ ì˜¤ë²„ì…ë‹ˆë‹¤.', 'bad');
      }
    }

    updateHighlights();
    if(!S.gameOver && isSolved()){
      S.gameOver=true;
      setStatus('ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰ ì˜ í’€ì—ˆì–´ìš”.', 'good');
    }
  }

  function isSolved(){
    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        if(S.values[r][c]!==S.solution[r][c]) return false;
      }
    }
    return true;
  }

  function newPuzzle(){
    const diffKey=selDiff.value;
    S.diff=diffKey;
    S.gameOver=false;
    S.hintsLeft=3;
    S.mistakes=0;
    updateHud();
    setStatus('í¼ì¦ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...', '');

    const {solution,puzzle}=generatePuzzle(diffKey);
    S.solution=solution;
    S.puzzle=puzzle;
    S.values=cloneGrid(puzzle);
    S.fixed=Array.from({length:9},()=>Array(9).fill(false));
    S.selected=null;

    buildGrid();
    buildPad();

    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        if(puzzle[r][c]!==0){
          S.fixed[r][c]=true;
        }
        updateCellDisplay(r,c);
      }
    }
    setStatus(`ë‚œì´ë„ ${DIFFS[diffKey].name} í¼ì¦ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`, '');
  }

  // ---- íŒíŠ¸ ----
  function giveHint(){
    if(S.gameOver) return;
    if(S.hintsLeft<=0){
      setStatus('ë” ì´ìƒ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.', 'bad');
      return;
    }
    const candidates=[];
    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        if(!S.fixed[r][c] && S.values[r][c]!==S.solution[r][c]){
          candidates.push({r,c});
        }
      }
    }
    if(!candidates.length){
      setStatus('ë” ì¤„ íŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ë¯¸ ëª¨ë‘ ë§ê²Œ ì±„ì›Œì ¸ ìˆì–´ìš”.', 'good');
      return;
    }
    const pick=candidates[randInt(candidates.length)];
    const r=pick.r, c=pick.c;
    S.values[r][c]=S.solution[r][c];
    S.fixed[r][c]=true;
    updateCellDisplay(r,c);
    S.hintsLeft--;
    updateHud();
    selectCell(r,c);
    setStatus(`íŒíŠ¸ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. (ë‚¨ì€ íŒíŠ¸ ${S.hintsLeft}/${S.maxHints})`, '');
    if(isSolved()){
      S.gameOver=true;
      setStatus('ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰ ì˜ í’€ì—ˆì–´ìš”.', 'good');
    }
  }

  // ---- ë³´ë“œ í´ë¦­ ----
  gridEl.addEventListener('click', e=>{
    const td=e.target.closest('td');
    if(!td) return;
    const r=parseInt(td.dataset.r,10);
    const c=parseInt(td.dataset.c,10);
    selectCell(r,c);
  });

  // ---- ìˆ«ì íŒ¨ë“œ ----
  padEl.addEventListener('click', e=>{
    const btn=e.target.closest('.pad-btn');
    if(!btn) return;
    if(!S.selected){
      setStatus('ë¨¼ì € ì¹¸ì„ ì„ íƒí•œ ë’¤ ìˆ«ìë¥¼ ëˆŒëŸ¬ ì£¼ì„¸ìš”.', 'bad');
      return;
    }
    const r=S.selected.r;
    const c=S.selected.c;
    if(S.fixed[r][c]){
      setStatus('ê¸°ë³¸ ìˆ«ìë‚˜ íŒíŠ¸ë¡œ ì±„ìš´ ì¹¸ì€ ë°”ê¿€ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'bad');
      return;
    }
    const val=btn.dataset.val;
    if(val==='clear'){
      placeValue(r,c,0);
    }else{
      const num=parseInt(val,10);
      placeValue(r,c,num);
    }
  });

  // ---- í‚¤ë³´ë“œ ì…ë ¥ ----
  window.addEventListener('keydown', e=>{
    if(S.gameOver) return;
    if(!S.selected) return;
    const r=S.selected.r;
    const c=S.selected.c;
    if(S.fixed[r][c]) return;

    if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)){
      e.preventDefault();
      let nr=r,nc=c;
      if(e.key==='ArrowUp') nr=Math.max(0,r-1);
      if(e.key==='ArrowDown') nr=Math.min(8,r+1);
      if(e.key==='ArrowLeft') nc=Math.max(0,c-1);
      if(e.key==='ArrowRight') nc=Math.min(8,c+1);
      selectCell(nr,nc);
      return;
    }

    if(e.key==='Backspace' || e.key==='Delete' || e.key==='0'){
      e.preventDefault();
      placeValue(r,c,0);
      return;
    }

    if(e.key>='1' && e.key<='9'){
      const num=parseInt(e.key,10);
      placeValue(r,c,num);
    }
  });

  // ---- ì •ë‹µ í™•ì¸ ----
  function checkSolution(){
    if(S.gameOver && !isSolved()){
      setStatus('ê²Œì„ ì˜¤ë²„ ìƒíƒœì…ë‹ˆë‹¤. ìƒˆ í¼ì¦ë¡œ ë‹¤ì‹œ ì‹œì‘í•´ë³´ì„¸ìš”.', 'bad');
      return;
    }
    let complete=true;
    let allCorrect=true;
    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        const td=getCell(r,c);
        if(td) td.classList.remove('error');
        const v=S.values[r][c];
        if(!v){
          complete=false;
          allCorrect=false;
          continue;
        }
        if(v!==S.solution[r][c]){
          allCorrect=false;
          if(td) td.classList.add('error');
        }
      }
    }
    if(allCorrect && complete){
      S.gameOver=true;
      setStatus('ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰', 'good');
    }else if(!complete){
      setStatus('ì•„ì§ ë¹„ì–´ ìˆëŠ” ì¹¸ì´ ìˆì–´ìš”. ë¹¨ê°„ ì¹¸ì€ í‹€ë¦° ìˆ«ìì…ë‹ˆë‹¤.', 'bad');
    }else{
      setStatus('í‹€ë¦° ì¹¸ì´ ìˆìŠµë‹ˆë‹¤. ë¹¨ê°„ ì¹¸ì„ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”.', 'bad');
    }
  }

  // ---- ëª¨ë‘ ì§€ìš°ê¸° ----
  function clearBoard(){
    if(S.gameOver){
      setStatus('ì´ë¯¸ ê²Œì„ì´ ëë‚¬ìŠµë‹ˆë‹¤. ìƒˆ í¼ì¦ë¡œ ë‹¤ì‹œ ì‹œì‘í•´ë³´ì„¸ìš”.', 'bad');
      return;
    }
    for(let r=0;r<9;r++){
      for(let c=0;c<9;c++){
        if(!S.fixed[r][c]){
          S.values[r][c]=0;
          updateCellDisplay(r,c);
        }
        const td=getCell(r,c);
        if(td) td.classList.remove('error');
      }
    }
    setStatus('ëª¨ë“  ì…ë ¥ì„ ì§€ì› ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”.', '');
  }

  btnNew.addEventListener('click', newPuzzle);
  btnHint.addEventListener('click', giveHint);
  btnCheck.addEventListener('click', checkSolution);
  btnClear.addEventListener('click', clearBoard);
  selDiff.addEventListener('change', newPuzzle);

  newPuzzle();
})();
</script>
</body>
</html>
